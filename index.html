<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>WebLLM PWA ‚Äî Chat</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#0f172a" />

  <!-- Base styles -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div id="app" class="app">
    <!-- Sidebar / Header -->
    <aside class="sidebar">
      <div class="brand">
        <div class="dot"></div>
        <div>
          <h1>WebLLM Chat</h1>
          <small class="muted">Local LLM on WebGPU</small>
        </div>
      </div>

      <div class="panel">
        <label for="modelSelect">Model</label>
        <select id="modelSelect" class="select"></select>

        <div class="row">
          <button id="btnInit" class="btn primary">N·∫°p model</button>
          <button id="btnRelease" class="btn">Gi·∫£i ph√≥ng</button>
        </div>

        <div class="progress-wrap">
          <progress id="progress" value="0" max="1"></progress>
          <div id="progressText" class="progress-text">Ch∆∞a t·∫£i</div>
        </div>

        <div class="status">
          <div>Tr·∫°ng th√°i: <span id="statusBadge" class="badge gray">Ch∆∞a kh·ªüi t·∫°o</span></div>
          <div class="tiny muted" id="envInfo"></div>
        </div>
      </div>

      <div class="panel">
        <div class="row">
          <button id="btnNew" class="btn">New Chat</button>
          <button id="btnExport" class="btn">Export</button>
        </div>
        <div class="row">
          <button id="btnTheme" class="btn">üåô/‚òÄÔ∏è</button>
          <button id="btnClearCache" class="btn danger">Xo√° l·ªãch s·ª≠</button>
        </div>
      </div>

      <div class="panel">
        <h3>Log t·∫£i</h3>
        <pre id="log" class="log"></pre>
      </div>
    </aside>

    <!-- Chat area -->
    <main class="main">
      <header class="topbar">
        <div class="chip" id="loadedModel">Ch∆∞a n·∫°p model</div>
        <div class="inline-stats" id="usageStats"></div>
      </header>

      <section id="messages" class="messages" aria-live="polite"></section>

      <footer class="composer">
        <textarea id="input" rows="1" placeholder="Nh·∫≠p tin nh·∫Øn... (Shift+Enter ƒë·ªÉ xu·ªëng d√≤ng)"></textarea>
        <div class="composer-actions">
          <button id="btnStop" class="btn">D·ª´ng</button>
          <button id="btnSend" class="btn primary">G·ª≠i</button>
        </div>
      </footer>
    </main>
  </div>

  <!-- Main script -->
  <script type="module" src="./main.js"></script>

  <!-- Minimal SW register (relative path for correct scope) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
